var app=angular.module("app",["ui.router","ngTouch"]);angular.module("ngTouch",[]).directive("ngTouchstart",function(){return{controller:["$scope","$element",function(t,e){function r(r){var o=e.attr("ng-touchstart");t.$apply(o)}e.bind("touchstart",r)}]}}).directive("ngTouch",function(){return{controller:["$scope","$element",function(t,e){function r(r){var o=e.attr("ng-touch");t.$apply(o)}e.bind("touchstart",r)}]}}).directive("ngTouchmove",function(){return{controller:["$scope","$element",function(t,e){function r(t){t.preventDefault(),e.bind("touchmove",o),e.bind("touchend",s)}function o(r){var o=e.attr("ng-touchmove");t.$apply(o)}function s(t){t.preventDefault(),e.unbind("touchmove",o),e.unbind("touchend",s)}e.bind("touchstart",r)}]}}).directive("ngTouchend",function(){return{controller:["$scope","$element",function(t,e){function r(r){var o=e.attr("ng-touchend");t.$apply(o)}e.bind("touchend",r)}]}}),app.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/home"),t.state("home",{url:"/home",templateUrl:"dist/tpls/home.html",controller:"home"}).state("cart",{url:"/cart",templateUrl:"dist/tpls/cart.html",controller:"cart"}).state("order",{url:"/order",templateUrl:"dist/tpls/order.html",controller:"order"}).state("user",{url:"/user",templateUrl:"dist/tpls/user.html",controller:"user"}).state("order_info",{url:"/order_info",templateUrl:"dist/tpls/order_info.html",controller:"user"}).state("search",{url:"/search",templateUrl:"dist/tpls/search.html",controller:"search"}).state("category",{url:"/category",templateUrl:"dist/tpls/category.html",controller:"category"}).state("good",{url:"/good",templateUrl:"dist/tpls/good.html",controller:"good"}).state("login",{url:"/login",templateUrl:"dist/tpls/login.html",controller:"login"}).state("list",{url:"/list",templateUrl:"dist/tpls/list.html",controller:"list"}).state("checkOrder",{url:"/checkOrder",templateUrl:"dist/tpls/checkOrder.html",controller:"checkOrder"}).state("address",{url:"/address",templateUrl:"dist/tpls/address.html",controller:"address"}).state("address_add",{url:"/address_add",templateUrl:"dist/tpls/address_add.html",controller:"address_add"}).state("searchByName",{url:"/search-by-name",templateUrl:"dist/tpls/searchByName.html",controller:"searchByName"}).state("searchByPdf",{url:"/search-by-pdf",templateUrl:"dist/tpls/search-pdf.html",controller:"searchByPdf"})}]),app.controller("index",["$scope",function(t){}]),app.controller("home",["$scope",function(t){}]),app.controller("cart",["$scope","autoRem","totalPrice",function(t,e,r){t.shops=[{selected:!0,imgSrc:"//i1.mifile.cn/a1/pms_1488358225.13157868!180x180.jpg",name:"红米4X 全网通版 2GB内存 香槟金 16GB",sellPrice:699,num:1},{selected:!1,imgSrc:"//i1.mifile.cn/a1/pms_1488358225.13157868!180x180.jpg",name:"红米4X 全网通版 2GB内存 香槟金 16GB",sellPrice:699,num:1}],t.totalPrice=r(t.shops),t.addNum=function(e){t.shops[e].num++,t.totalPrice=r(t.shops)},t.subNum=function(e){t.shops[e].num--,t.shops[e].num<1&&(t.shops[e].num=1),t.totalPrice=r(t.shops)},t.changeSelect=function(e){t.shops[e].selected=!t.shops[e].selected,t.totalPrice=r(t.shops)},t.deleteShop=function(e){t.shops.splice(e,1),t.totalPrice=r(t.shops)}}]),app.controller("order",["$scope",function(t){}]),app.controller("user",["$scope","$rootScope",function(t,e){e.isLogin=!0}]),app.controller("order_info",["$scope",function(t){}]),app.controller("search",["$scope",function(t){}]),app.controller("category",["$scope",function(t){}]),app.controller("good",["$scope","swipe",function(t,e){t.imgs=["dist/images/order1.jpg","dist/images/order2.jpg"],e()}]),app.controller("login",["$scope",function(t){}]),app.controller("list",["$scope",function(t){}]),app.controller("checkOrder",["$scope",function(t){}]),app.controller("address",["$scope",function(t){}]),app.controller("address_add",["$scope",function(t){t.provinceList=["请选择省","北京","天津"],console.log(t.province)}]),app.controller("searchByName",["$scope","searchByName","$rootScope",function(t,e,r){t.showList=!1,t.noList=!1,e.rate().success(function(t){r.rate=t,r.rate.push({name:"RMB",rate:100}),console.log(t)}),t.submit=function(){t.searchName&&e.search({part:t.searchName}).success(function(e){if(!e.distributors||0==e.distributors.length&&0==e.icKeys.length)return t.showList=!1,void(t.noList=!0);if(t.noList=!1,t.showList=!0,t.list=e.distributors,e.distributors.length<3){var r=3-e.distributors.length;Array.prototype.push.apply(t.list,e.icKeys.slice(0,r))}})}}]),app.controller("searchByPdf",["$scope","searchPdf",function(t,e){t.submit=function(){t.searchPdf&&e.search({part:t.searchPdf}).success(function(e){if(!e||0==e.pdfs.length)return t.showList=!1,void(t.noList=!0);t.noList=!1,t.showList=!0,t.list=e.pdfs})}}]),app.directive("swiper",function(){return{scope:{},restrict:"AE",template:'<div class="swiper-container"><div class="swiper-wrapper" ng-transclude></div><div class="swiper-pagination"></div></div>',transclude:!0}}),app.filter("changRate",["$rootScope",function(t){return function(e,r){for(var o=0;o<t.rate.length;o++)if(t.rate[o].name==r)return e=e*t.rate[o].rate/100,e.toFixed(2)}}]),app.factory("swipe",[function(){return function(){setTimeout(function(){new Swiper(".swiper-container",{loop:!0,pagination:".swiper-pagination"})},10)}}]),app.factory("totalPrice",[function(){return function(t){for(var e=0,r=0;r<t.length;r++)t[r].selected&&(e+=t[r].sellPrice*t[r].num);return e}}]),app.constant("host","http://chip.jymao.com"),app.factory("searchByName",["$http","host",function(t,e){return{search:function(r){return t.get(e+"/ds/search-price",{params:r})},rate:function(r){return t.get(e+"/ds/g/Exchange",{params:r})}}}]),app.factory("searchPdf",["$http","host",function(t,e){return{search:function(r){return t.get(e+"/ds/search-pdf",{params:r})}}}]);